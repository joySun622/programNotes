[Toc]

## 分布式事务

### 事务简介

1. **什么是事务**

   > 事务是提供一种机制——要么什么都不做，要么做全套(ALL OR NOTHING)

2. **事务的作用**

   > 保证数据的一致性

3. **事务ACID四大特性**

   > - **A:原子性(Atomicity)**[^1]
   >
   > - **C:一致性(Consistency)**[^2]
   >
   > - **I:隔离性(Isolation)**[^3]
   >
   >   ```
   >   隔离性4个隔离级别
   >   - read uncommit
   >   读未提交，可能会读到其他事务未提交的数据，也叫做脏读
   >   用户本来应该读取到id=1的用户age应该是10，结果读取到了其他事务还没有提交的事务，结果读取结果age=20,这就是脏读
   >   
   >   - read commit 
   >   读已提交，俩次读取结果不一致，叫做不可重复读
   >   不可重复读解决了脏读的问题，他只会读取已提交的事务
   >   用户开启事务读取id=1用户，查询到age=10,再次读取发现结果=20，在同一个事务里同一个查询读取到不同的结果叫做不可重复读
   >   
   >   - repeatable read   可重复读，这是mysql的默认级别，就是每次读取结果都一样，但是有可能产生幻读
   >   - serializable 串行，一般是不会使用的，他会给毎一行读取的数据加锁，会导致大量超时和锁竞争的问题
   >   
   >   脏读(Dirty Read):某个事物已更新一份数据，另一个事务在此时读取了同一份数据，由于某些原因，前一个RollBack了操作，则后一个事务所读取的数据就会是不正确的
   >   
   >   不可重复读(Non-repeatable read):在一个事务的俩次查询之中数据不一致，这可能是俩次查询过程中插入了一个事务更新的原有的数据
   >   
   >   幻读(Phantom Read) :在一个事务的俩次查询中数据笔数不一致，例如有一个事务查询了几列(Row)数据，而另一个事务却在此时插入了新的几列数据，先前的几列数据，先前的事务在接下来的查询中，就会发现有几列数据时它先前所没有的
   >   ```
   >
   > - **D:持久性(Durability)**[^4]

   > [^1]:一个事务(Tansaction)中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚(Rollback)到事务开始前的状态，就像这个事务从来没有执行过一样。
   > [^2]:指的是数据库总是从一个一致性的状态转换到另外一个一致性的状态。比如A转账给B 100块钱，假设A只有90块，支付之前我们数据库里的数据都是符合约束的，但是如果事务执行成功了，我们的数据库数据就破坏了约束，因此事务不能成功，这里我们说事务提供了一致性的保证
   > [^3]: 指的是一个事务的修改在最终提交前，对其他事务是不可见的
   > [^4]: 指的是一旦事务提交，所做的修改就会永久保存到数据库中

## 微服务

### 微服务理论

> [microservices原文](https://www.martinfowler.com/articles/microservices.html )
>
> [microservices译文](http://blog.cuicc.com/blog/2015/07/22/microservices/)

## 高并发衡量标准

- **响应时间(RT)**
  请求作出响应的时间
- **吞吐量**
  系统在单位时间内处理请求的数量
- **每秒请求数(QPS:Query/Request per second)、每秒事务数(TPS:Transaction per second)**
  专业测试工具：Load Runner； Apache ab；Apache JMeter
- **并发用户数**
  承载的正常使用系统功能的用户的数量







## 参考来源

[SpringCloud教程](https://www.bilibili.com/video/BV1f341167hQ?p=3&spm_id_from=pageDriver)