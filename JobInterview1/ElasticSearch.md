[toc]

### 什么是ES，为什么要用ES？

> Elasticsearch是一个基于Lucene的搜索引擎。它提供了具有HTTP Web界面和无架构JSON文档的分布式，多租户能力的全文搜索引擎。Elasticsearch是用Java开发的，根据Apache许可条款作为开源发布。
>
> 因为在我们商城中的数据，将来会非常多，所以采用以往的模糊查询，模糊查询前置配置，会放弃索引，导致商品查询是全表扫面，在百万级别的数据库中，效率非常低下，而我们使用ES做一个全文索引，我们将经常查询的商品的某些字段，比如说商品名，描述、价格还有id这些字段我们放入我们索引库里，可以提高查询速度。

### ElasticSearch中的分片是什么?

> 在大多数环境中，每个节点都在单独的盒子或虚拟机上运行。
>
> - 索引 - 在Elasticsearch中，索引是文档的集合。
> - 分片 -因为Elasticsearch是一个分布式搜索引擎，所以索引通常被分割成分布在多个节点上的被称为分片的元素。

### Elasticsearch中的倒排索引是什么？ 

> 倒排索引是搜索引擎的核心。搜索引擎的主要目标是在查找发生搜索条件的文档时提供快速搜索。倒排索引是一种像数据结构一样的散列图，可将用户从单词导向文档或网页。它是搜索引擎的核心。其主要目标是快速搜索从数百万文件中查找数据。

### ElasticSearch中的集群、节点、索引、文档、类型是什么？

> - 群集是一个或多个节点（服务器）的集合，它们共同保存您的整个数据，并提供跨所有节点的联合索引和搜索功能。群集由唯一名称标识，默认情况下为“elasticsearch”。此名称很重要，因为如果节点设置为按名称加入群集，则该节点只能是群集的一部分。
> - 节点是属于集群一部分的单个服务器。它存储数据并参与群集索引和搜索功能。
> - 索引就像关系数据库中的“数据库”。它有一个定义多种类型的映射。索引是逻辑名称空间，映射到一个或多个主分片，并且可以有零个或多个副本分片。 MySQL =>数据库 ElasticSearch =>索引
> - 文档类似于关系数据库中的一行。不同之处在于索引中的每个文档可以具有不同的结构（字段），但是对于通用字段应该具有相同的数据类型。 MySQL => Databases => Tables => Columns / Rows ElasticSearch => Indices => Types =>具有属性的文档
> - 类型是索引的逻辑类别/分区，其语义完全取决于用户。

## 在并发情况下，Elasticsearch 如果保证读写一致？

1. ES 数据并发冲突控制是基于的乐观锁和版本号的机制
2. es节点更新之后会向副本节点同步更新数据(同步写入)，直到所有副本都更新了才返回成功。

### 参考资料

1. https://blog.csdn.net/qq_26761587/article/details/105526946